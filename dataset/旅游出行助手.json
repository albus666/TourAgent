[
  {
    "moduleId": "userGuide",
    "name": "apps.templates.basicChat.user guidance",
    "avatar": "/imgs/module/userGuide.png",
    "flowType": "userGuide",
    "position": {
      "x": -281.7885278332349,
      "y": 2966.888653104733
    },
    "inputs": [
      {
        "key": "welcomeText",
        "type": "hidden",
        "valueType": "string",
        "label": "apps.templates.basicChat.Opening statement",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "你好呀！👋 我是你的**智能旅游规划助手**！\n\\n\n\n🌍 **我能做什么？**\n我直连**携程旅游数据库**，实时为你获取国内外热门景点信息，让你的旅行规划更轻松：\n\\n\n\n✨ **景点详情查询** - 想知道某个景点怎么样？我给你详细介绍、评分、游客评价  \n🗺️ **城市景点推荐** - 告诉我你想去哪个城市，我帮你找出最值得去的景点  \n📋 **旅游路线规划** - 根据你的偏好，为你量身定制旅行计划（支持国内）\n   - 需要提供**起点和终点**两个地点\n   - 支持四种出行方式：🚗自驾、🚴骑行、🚶步行、🚌公共交通（默认自驾，步行及骑行不支持超远距离）\n\n💬 **怎么问我？**\n   - 开封有什么好玩的景点？\n   - 清明上河园怎么样,请给我做一个旅游攻略？\n   - 帮我规划一下郑州去开封的一日游\n   - 从北京到西安自驾路线推荐\n\n快来开启你的精彩旅程吧！🚀",
        "connected": false
      },
      {
        "key": "variables",
        "type": "hidden",
        "valueType": "any",
        "label": "core.app.Chat Variable",
        "value": [],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "questionGuide",
        "valueType": "boolean",
        "type": "switch",
        "label": "core.app.Question Guide",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": true,
        "connected": false
      },
      {
        "key": "tts",
        "type": "hidden",
        "valueType": "any",
        "label": "core.app.TTS",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": []
  },
  {
    "moduleId": "userChatInput",
    "name": "apps.templates.userChatInput.User question",
    "avatar": "/imgs/module/userChatInput.svg",
    "flowType": "questionInput",
    "position": {
      "x": -957.797349445511,
      "y": 1043.8474101830375
    },
    "inputs": [
      {
        "key": "userChatInput",
        "type": "systemInput",
        "valueType": "string",
        "label": "apps.templates.userChatInput.User question",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "userChatInput",
        "label": "apps.templates.userChatInput.User question",
        "type": "source",
        "valueType": "string",
        "targets": [
          {
            "moduleId": "chatModule",
            "key": "userChatInput"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "chatModule",
    "name": "文本预处理",
    "avatar": "/imgs/module/ai.svg",
    "flowType": "chatNode",
    "showStatus": true,
    "position": {
      "x": -248.6713552634567,
      "y": 1596.5349974282037
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "model",
        "type": "selectChatModel",
        "label": "apps.templates.userChatInput.dialog model",
        "required": true,
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "temperature",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Temperature",
        "value": 0,
        "valueType": "number",
        "min": 0,
        "max": 10,
        "step": 1,
        "markList": [
          {
            "label": "apps.templates.userChatInput.Strict",
            "value": 0
          },
          {
            "label": "apps.templates.userChatInput.Divergent",
            "value": 10
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "maxToken",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Response limit",
        "value": 0,
        "valueType": "number",
        "min": 100,
        "max": 4000,
        "step": 50,
        "markList": [
          {
            "label": "100",
            "value": 100
          },
          {
            "label": "4000",
            "value": 4000
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "isResponseAnswerText",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Return to AI Content",
        "value": false,
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quoteTemplate",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Citation Content Templates",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quotePrompt",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Quote content prompts",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "aiSettings",
        "type": "aiSettings",
        "label": "",
        "valueType": "any",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "label": "apps.templates.userChatInput.System prompt words",
        "max": 300,
        "valueType": "string",
        "description": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "placeholder": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "# 用户输入文本预处理工具\n\n## 角色\n\n你是用户输入文本预处理工具，负责验证和提取用户输入中的关键信息，严格按照规则执行。\n\n## 处理流程\n\n### 第一步：旅游相关性判断\n- 判断用户输入是否与旅游相关\n- 以下情况判定为 `其他问题`：\n  - 日常闲聊、问候（如\"你好\"、\"谢谢\"）\n  - 系统宣传语、引导语\n  - 与旅游无关的话题\n  - 无法理解的输入\n  - **地点信息不足的情况**\n- 如果是旅游相关内容 → 进入第二步\n\n### 第二步：意图识别\n分析用户输入，判断属于以下哪种服务类型：\n\n**服务类型说明：**\n- **景点详情查询**：用户想了解某个具体景点的信息（评价、介绍、门票等）\n- **城市景点推荐**：用户想知道某个城市有哪些值得去的景点\n- **旅游路线规划**：用户想规划从一个地点到另一个地点的旅游路线\n- **其他问题**：与旅游无关或地点信息不足的情况\n\n**判断技巧：**\n- 提到具体景点名称 + 询问详情 → 景点详情查询\n- 提到城市名 + 询问推荐/有什么好玩的 → 城市景点推荐\n- 提到两个地点 + 路线/行程规划 → 旅游路线规划\n- **地点信息不足 → 其他问题**\n\n识别意图后 → 进入第三步\n\n### 第三步：信息提取\n\n#### 3.1 地点提取\n从用户输入中提取地点名称（城市名或景点名）：\n\n**提取要求：**\n1. **景点详情查询**：至少提取 1 个地点（景点名）\n2. **城市景点推荐**：至少提取 1 个地点（城市名）\n3. **旅游路线规划**：必须提取 2 个地点（起点、终点），按\"起点,终点\"顺序输出\n4. **其他问题**：地点信息不足或与旅游无关\n\n**提取规则：**\n- 保留地点名称的完整性，不可过度分割\n- 多个地点用英文逗号分隔：`地点1,地点2`\n- 景点名称视为地点\n- **如果地点数量不足 → 归类为\"其他问题\"**\n\n#### 3.2 出行方式提取（仅针对旅游路线规划）\n当意图为\"旅游路线规划\"时，需要识别用户的出行方式：\n\n**支持的出行方式：**\n- **自驾**：开车、自驾、驾车等\n- **骑行**：骑车、骑行、自行车等\n- **步行**：走路、步行、徒步等\n- **公共交通**：坐车、公交、地铁、公共交通、高铁、火车等\n\n**识别规则：**\n- 从用户输入中提取明确的出行方式关键词\n- 如果用户未明确说明出行方式，默认为：`自驾`\n- 只返回四种标准出行方式之一：`自驾`、`骑行`、`步行`、`公共交通`\n\n## 输出格式\n\n**必须严格按照以下 JSON 格式输出，不要添加任何额外文字：**\n\n### 景点详情查询 / 城市景点推荐 / 其他问题\n```json\n{\n  \"intent\": \"景点详情查询|城市景点推荐|旅游路线规划|其他问题\",\n  \"original_text\": \"用户的原始输入\",\n  \"parseResult\": \"提取的地点信息或错误说明\"\n}\n```\n\n### 旅游路线规划\n```json\n{\n  \"intent\": \"旅游路线规划\",\n  \"original_text\": \"用户的原始输入\",\n  \"parseResult\": \"提取的地点信息或错误说明\",\n  \"travel_model\": \"自驾|骑行|步行|公共交通\"\n}\n```\n\n**字段说明：**\n- **intent**：识别出的服务类型，四选一\n- **original_text**：用户输入的完整文本\n- **parseResult**：\n  - 成功提取：地点名称（如 `郑州方特` 或 `郑州,上海`）\n  - 地点不足：`地点信息不足，[服务类型]需要[数量]个地点`\n  - 其他问题：`与旅游无关或无法理解`\n- **travel_model**：仅在意图为\"旅游路线规划\"时返回，四选一\n\n## 示例\n\n**示例1：景点详情查询**\n- 用户输入：郑州方特怎么样？\n- 输出：\n```json\n{\n  \"intent\": \"景点详情查询\",\n  \"original_text\": \"郑州方特怎么样？\",\n  \"parseResult\": \"郑州方特\"\n}\n```\n\n**示例2：城市景点推荐**\n- 用户输入：开封有什么好玩的？\n- 输出：\n```json\n{\n  \"intent\": \"城市景点推荐\",\n  \"original_text\": \"开封有什么好玩的？\",\n  \"parseResult\": \"开封\"\n}\n```\n\n**示例3：旅游路线规划（默认自驾）**\n- 用户输入：从北京到上海三日游怎么安排？\n- 输出：\n```json\n{\n  \"intent\": \"旅游路线规划\",\n  \"original_text\": \"从北京到上海三日游怎么安排？\",\n  \"parseResult\": \"北京,上海\",\n  \"travel_model\": \"自驾\"\n}\n```\n\n**示例4：旅游路线规划（明确出行方式 - 公共交通）**\n- 用户输入：我想坐高铁从郑州到西安玩，怎么规划路线？\n- 输出：\n```json\n{\n  \"intent\": \"旅游路线规划\",\n  \"original_text\": \"我想坐高铁从郑州到西安玩，怎么规划路线？\",\n  \"parseResult\": \"郑州,西安\",\n  \"travel_model\": \"公共交通\"\n}\n```\n\n**示例5：旅游路线规划（明确出行方式 - 骑行）**\n- 用户输入：骑自行车从杭州西湖到灵隐寺怎么走？\n- 输出：\n```json\n{\n  \"intent\": \"旅游路线规划\",\n  \"original_text\": \"骑自行车从杭州西湖到灵隐寺怎么走？\",\n  \"parseResult\": \"杭州西湖,灵隐寺\",\n  \"travel_model\": \"骑行\"\n}\n```\n\n**示例6：旅游路线规划（明确出行方式 - 步行）**\n- 用户输入：从天安门走到故宫要多久？\n- 输出：\n```json\n{\n  \"intent\": \"旅游路线规划\",\n  \"original_text\": \"从天安门走到故宫要多久？\",\n  \"parseResult\": \"天安门,故宫\",\n  \"travel_model\": \"步行\"\n}\n```\n\n**示例7：旅游路线规划（明确出行方式 - 自驾）**\n- 用户输入：自驾从成都到九寨沟的路线推荐\n- 输出：\n```json\n{\n  \"intent\": \"旅游路线规划\",\n  \"original_text\": \"自驾从成都到九寨沟的路线推荐\",\n  \"parseResult\": \"成都,九寨沟\",\n  \"travel_model\": \"自驾\"\n}\n```\n\n**示例8：其他问题（与旅游无关）**\n- 用户输入：你好，请介绍一下自己\n- 输出：\n```json\n{\n  \"intent\": \"其他问题\",\n  \"original_text\": \"你好，请介绍一下自己\",\n  \"parseResult\": \"与旅游无关或无法理解\"\n}\n```\n\n**示例9：景点详情查询（多个景点）**\n- 用户输入：开封万岁山武侠城和上海迪士尼哪个好玩？\n- 输出：\n```json\n{\n  \"intent\": \"景点详情查询\",\n  \"original_text\": \"开封万岁山武侠城和上海迪士尼哪个好玩？\",\n  \"parseResult\": \"开封万岁山武侠城,上海迪士尼\"\n}\n```\n\n**示例10：其他问题（地点不足）**\n- 用户输入：从北京出发旅游三天\n- 输出：\n```json\n{\n  \"intent\": \"其他问题\",\n  \"original_text\": \"从北京出发旅游三天\",\n  \"parseResult\": \"地点信息不足，旅游路线规划需要2个地点（起点和终点）\"\n}\n```\n\n## 注意事项\n\n- 你的输出将直接流向下一个流程，必须是有效的 JSON 格式\n- 严格按照输出格式返回结果，不要添加额外解释或markdown标记\n- 只返回 JSON 对象，不进行对话\n- 仔细分析用户意图，准确判断服务类型\n- **旅游路线规划**必须包含\"travel_model\"字段，其他意图类型不需要该字段\n- 出行方式识别优先匹配用户输入中的明确关键词，无关键词时默认返回自驾\n- **地点信息不足的情况归类为\"其他问题\"**\n- 地点不足：`地点信息不足，[服务类型]需要[数量]个地点`\n- 其他问题：`与旅游无关或无法理解`",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "quoteQA",
        "type": "target",
        "label": "apps.templates.userChatInput.Quoted content",
        "description": "apps.templates.userChatInput.Object Array Format",
        "valueType": "datasetQuote",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "target",
        "label": "apps.templates.userChatInput.User question",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "answerText",
        "label": "chat.AI response content",
        "description": "apps.templates.userChatInput.will be triggered when the stream has finished replying",
        "valueType": "string",
        "type": "source",
        "targets": [
          {
            "moduleId": "cimtzq",
            "key": "userChatInput"
          },
          {
            "moduleId": "yeovv8",
            "key": "content"
          },
          {
            "moduleId": "pht3uv",
            "key": "userChatInput"
          }
        ]
      },
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "history",
        "label": "apps.templates.userChatInput.New context",
        "description": "apps.templates.userChatInput.Splice this reply into the history",
        "valueType": "chatHistory",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "pht3uv",
    "name": "AI回复",
    "avatar": "/imgs/module/ai.svg",
    "flowType": "chatNode",
    "showStatus": true,
    "position": {
      "x": 1372.565272340879,
      "y": 501.8614814204973
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "model",
        "type": "selectChatModel",
        "label": "apps.templates.userChatInput.dialog model",
        "required": true,
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "temperature",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Temperature",
        "value": 0,
        "valueType": "number",
        "min": 0,
        "max": 10,
        "step": 1,
        "markList": [
          {
            "label": "apps.templates.userChatInput.Strict",
            "value": 0
          },
          {
            "label": "apps.templates.userChatInput.Divergent",
            "value": 10
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "maxToken",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Response limit",
        "value": 0,
        "valueType": "number",
        "min": 100,
        "max": 4000,
        "step": 50,
        "markList": [
          {
            "label": "100",
            "value": 100
          },
          {
            "label": "4000",
            "value": 4000
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "isResponseAnswerText",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Return to AI Content",
        "value": true,
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quoteTemplate",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Citation Content Templates",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quotePrompt",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Quote content prompts",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "aiSettings",
        "type": "aiSettings",
        "label": "",
        "valueType": "any",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "label": "apps.templates.userChatInput.System prompt words",
        "max": 300,
        "valueType": "string",
        "description": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "placeholder": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "# 角色\n你是旅游小助手，只提供旅游相关的内容，不涉及生活的方面，如天气温度等内容\n\n# 规则\n根据用户输入，当用户输入的内容与旅游助手功能无关时，需向用户发出提示，并对其输入内容进行简要分析后生成回复。\n或者如果是因为输入只是简单的询问，可以提醒用户可以输入大概目标以便进行分析",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "quoteQA",
        "type": "target",
        "label": "apps.templates.userChatInput.Quoted content",
        "description": "apps.templates.userChatInput.Object Array Format",
        "valueType": "datasetQuote",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "target",
        "label": "apps.templates.userChatInput.User question",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "history",
        "label": "apps.templates.userChatInput.New context",
        "description": "apps.templates.userChatInput.Splice this reply into the history",
        "valueType": "chatHistory",
        "type": "source",
        "targets": []
      },
      {
        "key": "answerText",
        "label": "chat.AI response content",
        "description": "apps.templates.userChatInput.will be triggered when the stream has finished replying",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "cimtzq",
    "name": "意图识别",
    "avatar": "/imgs/module/cq.svg",
    "flowType": "classifyQuestion",
    "showStatus": true,
    "position": {
      "x": 523.5623084872334,
      "y": 1242.861764546595
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "model",
        "type": "selectCQModel",
        "valueType": "string",
        "label": "apps.templates.cq.Categorization model",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "valueType": "string",
        "label": "apps.templates.cq.Background knowledge",
        "description": "apps.templates.cq.You can add some content-specific introductions",
        "placeholder": "apps.templates.cq.You can add some content-specific introductions placeholder",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "请根据输入的json文本中的“intent”一项直接判断分类",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "target",
        "label": "apps.templates.userChatInput.User question",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "agents",
        "type": "custom",
        "valueType": "any",
        "label": "",
        "value": [
          {
            "value": "其他问题",
            "key": "wqre"
          },
          {
            "value": "景点详情查询",
            "key": "sdfa"
          },
          {
            "value": "城市景点推荐",
            "key": "agex"
          },
          {
            "value": "旅游路线规划",
            "key": "gnen"
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "wqre",
        "label": "",
        "type": "hidden",
        "targets": [
          {
            "moduleId": "pht3uv",
            "key": "switch"
          }
        ]
      },
      {
        "key": "sdfa",
        "label": "",
        "type": "hidden",
        "targets": [
          {
            "moduleId": "yeovv8",
            "key": "switch"
          },
          {
            "moduleId": "ow1vab",
            "key": "switch"
          }
        ]
      },
      {
        "key": "agex",
        "label": "",
        "type": "hidden",
        "targets": [
          {
            "moduleId": "bbs3eh",
            "key": "switch"
          },
          {
            "moduleId": "yeovv8",
            "key": "switch"
          }
        ]
      },
      {
        "key": "gnen",
        "label": "",
        "type": "hidden",
        "targets": [
          {
            "moduleId": "yeovv8",
            "key": "switch"
          },
          {
            "moduleId": "1rh057",
            "key": "switch"
          },
          {
            "moduleId": "lbigtg",
            "key": "switch"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "yeovv8",
    "name": "文本内容提取",
    "avatar": "/imgs/module/extract.svg",
    "flowType": "contentExtract",
    "showStatus": true,
    "position": {
      "x": 1322.5668117055368,
      "y": 2636.995336846423
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "model",
        "type": "selectExtractModel",
        "valueType": "string",
        "label": "core.module.flow.Extraction Model",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "description",
        "type": "textarea",
        "valueType": "string",
        "label": "chat.response.module extract description",
        "description": "core.module.flow.Give the AI some corresponding background knowledge or description of the requirements tips",
        "required": true,
        "placeholder": "core.module.flow.You re a lab appointment assistant placeholder",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "从输入的JSON中提取所有目标字段并输入下一流程，中间不做任何处理\n\n输入：\n{\n  \"intent\": \"旅游路线规划\",\n  \"original_text\": \"我想从郑州金水区去平遥古城玩\",\n  \"parseResult\": \"郑州金水区,平遥古城\",\n  \"travel_model\": \"自驾\"\n}\n\n",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "content",
        "type": "target",
        "label": "core.module.flow.Text to be extracted",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "extractKeys",
        "type": "custom",
        "label": "core.module.flow.Target field",
        "valueType": "any",
        "description": "core.module.flow.Target field description",
        "value": [
          {
            "desc": "提取地点结果",
            "key": "parseResult",
            "required": true,
            "enum": "郑州\n郑州方特乐园\n上海\n上海迪士尼"
          },
          {
            "desc": "出行方式",
            "key": "travel_model",
            "required": false,
            "enum": "自驾\n骑行\n步行\n公共交通"
          },
          {
            "desc": "原始文本",
            "key": "original_text",
            "required": false,
            "enum": ""
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "success",
        "label": "core.module.flow.Fields are fully extracted",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "failed",
        "label": "core.module.flow.Extracted fields are missing",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "fields",
        "label": "core.module.flow.Complete extraction results",
        "description": "core.module.flow.Complete extraction results description",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "parseResult",
        "label": "提取结果-提取地点结果",
        "description": "无法提取时不会返回",
        "valueType": "string",
        "type": "source",
        "targets": [
          {
            "moduleId": "bbs3eh",
            "key": "cityName"
          },
          {
            "moduleId": "z7tp6o",
            "key": "cityName"
          },
          {
            "moduleId": "jchve5",
            "key": "cityNames"
          },
          {
            "moduleId": "ow1vab",
            "key": "cityName"
          },
          {
            "moduleId": "lbigtg",
            "key": "userChatInput"
          },
          {
            "moduleId": "bwshoh",
            "key": "switch"
          },
          {
            "moduleId": "bwshoh",
            "key": "userChatInput"
          }
        ]
      },
      {
        "key": "travel_model",
        "label": "提取结果-出行方式",
        "description": "无法提取时不会返回",
        "valueType": "string",
        "type": "source",
        "targets": [
          {
            "moduleId": "1rh057",
            "key": "travel_model"
          }
        ]
      },
      {
        "key": "original_text",
        "label": "提取结果-原始文本",
        "description": "无法提取时不会返回",
        "valueType": "string",
        "type": "source",
        "targets": [
          {
            "moduleId": "7t0xhy",
            "key": "original_text"
          },
          {
            "moduleId": "ntuahi",
            "key": "original_text"
          },
          {
            "moduleId": "tpnip7",
            "key": "original_text"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "z7tp6o",
    "name": "游客评价查询",
    "avatar": "/imgs/module/http.svg",
    "flowType": "httpRequest",
    "showStatus": true,
    "position": {
      "x": 3492.794080359611,
      "y": 845.5205056216071
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "GET",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "http://www.atopes.xyz:4399/spots/detail",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [
          {
            "key": "keyword",
            "type": "string",
            "value": "{{cityName}}"
          }
        ],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "valueType": "string",
        "label": "cityName",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "key": "cityName",
        "connected": true
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "any",
        "label": "游客评论内容",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "tpnip7",
            "key": "comments"
          }
        ],
        "key": "comments"
      }
    ]
  },
  {
    "moduleId": "bbs3eh",
    "name": "城市景点推荐",
    "avatar": "/imgs/module/http.svg",
    "flowType": "httpRequest",
    "showStatus": true,
    "position": {
      "x": 2534.441467083592,
      "y": 2020.5314406828302
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "GET",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "http://www.atopes.xyz:4399/spots/recommend",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [
          {
            "key": "cityName",
            "type": "string",
            "value": "{{cityName}}"
          },
          {
            "key": "count",
            "type": "string",
            "value": "10"
          }
        ],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "key": "cityName",
        "valueType": "string",
        "label": "cityName",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "string",
        "label": "景点推荐数据",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "7t0xhy",
            "key": "spots"
          }
        ],
        "key": "spots"
      }
    ]
  },
  {
    "moduleId": "1rh057",
    "name": "旅游路径规划",
    "avatar": "/imgs/module/http.svg",
    "flowType": "httpRequest",
    "showStatus": true,
    "position": {
      "x": 4406.397834570957,
      "y": 3342.0162721011206
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "POST",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "http://www.atopes.xyz:4399/route/plan",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "{\r\n  \"location\": \"{{location}}\",\r\n  \"travel_model\":\"{{travel_model}}\"\r\n}",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "key": "travel_model",
        "valueType": "string",
        "label": "出行方式",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true
      },
      {
        "valueType": "any",
        "label": "地理编码",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true,
        "key": "location"
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "string",
        "key": "route_text",
        "label": "路径规划文本",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "ntuahi",
            "key": "route_text"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "jchve5",
    "name": "地理编码查询",
    "avatar": "/imgs/module/http.svg",
    "flowType": "httpRequest",
    "showStatus": true,
    "position": {
      "x": 3853.293331119962,
      "y": 4416.807733850426
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "GET",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "http://www.atopes.xyz:4399/geocode",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [
          {
            "key": "cities",
            "type": "string",
            "value": "{{cityNames}}"
          }
        ],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "valueType": "string",
        "label": "城市名",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "key": "cityNames",
        "connected": true
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "any",
        "label": "地理编码",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "1rh057",
            "key": "location"
          }
        ],
        "key": "location"
      }
    ]
  },
  {
    "moduleId": "16kp66",
    "name": "apps.templates.userChatInput.AI Dialogue",
    "avatar": "/imgs/module/ai.svg",
    "flowType": "chatNode",
    "showStatus": true,
    "position": {
      "x": 4482.83017201168,
      "y": 2087.3999493232513
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "model",
        "type": "selectChatModel",
        "label": "apps.templates.userChatInput.dialog model",
        "required": true,
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "temperature",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Temperature",
        "value": 5,
        "valueType": "number",
        "min": 0,
        "max": 10,
        "step": 1,
        "markList": [
          {
            "label": "apps.templates.userChatInput.Strict",
            "value": 0
          },
          {
            "label": "apps.templates.userChatInput.Divergent",
            "value": 10
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "maxToken",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Response limit",
        "value": 4096,
        "valueType": "number",
        "min": 100,
        "max": 4000,
        "step": 50,
        "markList": [
          {
            "label": "100",
            "value": 100
          },
          {
            "label": "4000",
            "value": 4000
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "isResponseAnswerText",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Return to AI Content",
        "value": true,
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quoteTemplate",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Citation Content Templates",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quotePrompt",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Quote content prompts",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "aiSettings",
        "type": "aiSettings",
        "label": "",
        "valueType": "any",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "label": "apps.templates.userChatInput.System prompt words",
        "max": 300,
        "valueType": "string",
        "description": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "placeholder": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "角色设定：\n你是一名专业、细致且高效的中文旅游规划助手。\n你具备深厚的旅游策划经验，能够基于结构化数据（如官方推荐信息、游客评论、图片等）生成自然流畅、优雅可靠、具有可执行性的出行建议或完整行程方案。\n\n🎯 目标\n\n基于用户提供的结构化输入数据，自动输出一份高质量的旅行推荐内容：\n\n优先展示景点名称与图片（使用 Markdown 语法直接输出）\n\n提炼官方信息（位置、等级、价格、特色等）\n\n分析评论中可用的游玩建议\n\n给出实用的出行规划\n\n所有输出均以 Markdown 格式 呈现（非代码块）\n\n🪶 输出格式要求（AI 生成内容时必须遵守）\n🔹 一级逻辑：\n\n对输入中的每个景点依次输出以下内容：\n\n## 🏞 景点名称\n![景点图片](coverImageUrl)\n\n### 📍 官方信息\n- 所在区域：{zoneName}\n- 景区等级：{sightLevelStr 或 “未评级”}\n- 评分：{commentScore} / 5 （共 {commentCount} 条评论）\n- 距离市中心：{distanceStr}\n- 门票价格：{price 或 “暂无”} 元（{priceTypeDesc}）\n- 特色亮点：{shortFeatures 合并为自然句}\n- 详情链接：[查看详情]({detailUrl})\n\n### 💬 游客实用反馈\n根据评分和评论数推测游客体验，例如：\n- 若评分 ≥ 4.6：突出高满意度与游玩亮点  \n- 若评分 4.3~4.5：描述为“整体良好、细节有提升空间”  \n- 若评分 < 4.3：指出可能存在的体验差异  \n\n### 🧭 出行建议\n根据以上信息综合生成一句自然的出行建议：\n- 推荐游玩顺序（例如“建议先游清明上河园，再观看《大宋东京梦华》演出”）  \n- 建议游玩时间段（如“下午至夜晚观看灯光表演”）  \n- 特别提示（如“建议提前在线购票”“适合家庭出游”等）\n\n🔹 总结输出\n\n在所有景点展示完后，生成一个小结：\n\n### ✨ 开封旅游小结\n综合推荐前 2–3 个最具代表性的景点，给出简短的整体出行规划。\n\n💬 语气要求：\n\n全程使用自然流畅的简体中文\n\n语言专业、温暖、礼貌、有温度\n\n逻辑清晰、条理分明\n\n不出现英文或程序说明文字",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "quoteQA",
        "type": "target",
        "label": "apps.templates.userChatInput.Quoted content",
        "description": "apps.templates.userChatInput.Object Array Format",
        "valueType": "datasetQuote",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "target",
        "label": "apps.templates.userChatInput.User question",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "history",
        "label": "apps.templates.userChatInput.New context",
        "description": "apps.templates.userChatInput.Splice this reply into the history",
        "valueType": "chatHistory",
        "type": "source",
        "targets": []
      },
      {
        "key": "answerText",
        "label": "chat.AI response content",
        "description": "apps.templates.userChatInput.will be triggered when the stream has finished replying",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "7t0xhy",
    "name": "变量聚合器",
    "avatar": "/imgs/module/http.svg",
    "flowType": "httpRequest",
    "showStatus": true,
    "position": {
      "x": 3511.2733267309127,
      "y": 2059.479568634389
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "POST",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "http://www.atopes.xyz:4399/aggregate",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "{\r\n  \"用户问题\":\"{{original_text}}\",\r\n  \"景点推荐数据\":\"{{spots}}\"\r\n}",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "valueType": "string",
        "label": "景点推荐数据",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true,
        "key": "spots"
      },
      {
        "key": "original_text",
        "valueType": "string",
        "label": "用户问题",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "string",
        "key": "data",
        "label": "聚合文本",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "16kp66",
            "key": "userChatInput"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "tpnip7",
    "name": "变量聚合器",
    "avatar": "/imgs/module/http.svg",
    "flowType": "httpRequest",
    "showStatus": true,
    "position": {
      "x": 4443.931798614386,
      "y": 770.6226307416762
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "POST",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "http://www.atopes.xyz:4399/aggregate",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "{\r\n  \"用户问题\":\"{{original_text}}\",\r\n  \"游客评价内容\":\"{{comments}}\",\r\n  \"官网信息\":\"{{data}}\"\r\n}",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "valueType": "string",
        "label": "游客评论内容",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true,
        "key": "comments"
      },
      {
        "key": "original_text",
        "valueType": "string",
        "label": "用户问题",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true
      },
      {
        "valueType": "string",
        "label": "官网信息",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true,
        "key": "data"
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "any",
        "label": "聚合文本",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "kg9w18",
            "key": "userChatInput"
          }
        ],
        "key": "data"
      }
    ]
  },
  {
    "moduleId": "ntuahi",
    "name": "变量聚合器",
    "avatar": "/imgs/module/http.svg",
    "flowType": "httpRequest",
    "showStatus": true,
    "position": {
      "x": 5265.125237347675,
      "y": 3306.513785398744
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "POST",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "http://www.atopes.xyz:4399/aggregate",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "{\r\n  \"用户问题\":\"{{original_text}}\",\r\n  \"路径规划\":\"{{route_text}}\"\r\n}",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "key": "original_text",
        "valueType": "string",
        "label": "用户问题",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true
      },
      {
        "key": "route_text",
        "valueType": "string",
        "label": "路径规划文本",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "connected": true
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "string",
        "key": "data",
        "label": "聚合文本",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "b2j7xh",
            "key": "userChatInput"
          }
        ]
      }
    ]
  },
  {
    "moduleId": "b2j7xh",
    "name": "apps.templates.userChatInput.AI Dialogue",
    "avatar": "/imgs/module/ai.svg",
    "flowType": "chatNode",
    "showStatus": true,
    "position": {
      "x": 6038.379514293852,
      "y": 3297.0595545175247
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "model",
        "type": "selectChatModel",
        "label": "apps.templates.userChatInput.dialog model",
        "required": true,
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "temperature",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Temperature",
        "value": 5,
        "valueType": "number",
        "min": 0,
        "max": 10,
        "step": 1,
        "markList": [
          {
            "label": "apps.templates.userChatInput.Strict",
            "value": 0
          },
          {
            "label": "apps.templates.userChatInput.Divergent",
            "value": 10
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "maxToken",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Response limit",
        "value": 4096,
        "valueType": "number",
        "min": 100,
        "max": 4000,
        "step": 50,
        "markList": [
          {
            "label": "100",
            "value": 100
          },
          {
            "label": "4000",
            "value": 4000
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "isResponseAnswerText",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Return to AI Content",
        "value": true,
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quoteTemplate",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Citation Content Templates",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quotePrompt",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Quote content prompts",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "aiSettings",
        "type": "aiSettings",
        "label": "",
        "valueType": "any",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "label": "apps.templates.userChatInput.System prompt words",
        "max": 300,
        "valueType": "string",
        "description": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "placeholder": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "角色：你是一名专业、细致且高效的中文旅游规划助手。\n\n目标：\n基于用户提供的文本与资料（包括路径规划数据、景点信息、评论、图片等），生成优雅、可靠、可执行的出行建议或完整行程方案。\n当用户提供图片时，直接以 Markdown 图片语法原样输出。\n\n语言要求：\n始终使用简体中文，表达自然、精炼、礼貌且有温度。\n\n格式要求：\n- 如果输入包含“路径规划”或“路线指引”等内容，不要逐条照搬原始路线。\n- 请根据路径规划内容进行**自然语言重组和总结**，生成：\n  - 总距离与预计时长的简明描述；\n  - 出行方式与沿途概况；\n  - 若有特色城市或节点，可补充实用建议（如休息点、交通方式推荐等）。\n- 输出语气应温和、体贴、有逻辑，不出现命令式或地图导航语气。\n\n示例：\n输入：\n{\n  \"用户问题\": \"我想从东京去神户\",\n  \"路径规划\": \"📏 总距离: 1387.2公里\\n⏱️ 预计时长: 14.6小时\\n路线指引: 1. 从起点向正北方向出发... \"\n}\n\n输出（示例）：\n**东京 → 神户 出行建议**\n\n📍 **距离与时长**  \n全程约1387公里，预计车程约14.6小时。若选择新干线，高速铁路可在3小时左右抵达，更为便捷。\n\n🚗 **路线建议**  \n整体路线大致沿日本本州东部向西行，经名古屋、京都等地，是一条风景优美的跨城旅线。  \n若自驾，可考虑在静冈或名古屋停留休息，途中欣赏富士山与太平洋沿岸风光。\n\n💡 **贴心提示**  \n建议提前查看天气与路况，若行程较长可分段住宿，或改乘新干线以节约时间。\n\n---\n\n你不需要展示原始的“路线步骤”。你是“规划助手”，不是“导航读条器”。输出要更像一份高质量的出行方案文案。\n",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "quoteQA",
        "type": "target",
        "label": "apps.templates.userChatInput.Quoted content",
        "description": "apps.templates.userChatInput.Object Array Format",
        "valueType": "datasetQuote",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "target",
        "label": "apps.templates.userChatInput.User question",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "history",
        "label": "apps.templates.userChatInput.New context",
        "description": "apps.templates.userChatInput.Splice this reply into the history",
        "valueType": "chatHistory",
        "type": "source",
        "targets": []
      },
      {
        "key": "answerText",
        "label": "chat.AI response content",
        "description": "apps.templates.userChatInput.will be triggered when the stream has finished replying",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "kg9w18",
    "name": "apps.templates.userChatInput.AI Dialogue",
    "avatar": "/imgs/module/ai.svg",
    "flowType": "chatNode",
    "showStatus": true,
    "position": {
      "x": 5353.408970994451,
      "y": 784.9686709046648
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "model",
        "type": "selectChatModel",
        "label": "apps.templates.userChatInput.dialog model",
        "required": true,
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "temperature",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Temperature",
        "value": 5,
        "valueType": "number",
        "min": 0,
        "max": 10,
        "step": 1,
        "markList": [
          {
            "label": "apps.templates.userChatInput.Strict",
            "value": 0
          },
          {
            "label": "apps.templates.userChatInput.Divergent",
            "value": 10
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "maxToken",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Response limit",
        "value": 4096,
        "valueType": "number",
        "min": 100,
        "max": 4000,
        "step": 50,
        "markList": [
          {
            "label": "100",
            "value": 100
          },
          {
            "label": "4000",
            "value": 4000
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "isResponseAnswerText",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Return to AI Content",
        "value": true,
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quoteTemplate",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Citation Content Templates",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quotePrompt",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Quote content prompts",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "aiSettings",
        "type": "aiSettings",
        "label": "",
        "valueType": "any",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "label": "apps.templates.userChatInput.System prompt words",
        "max": 300,
        "valueType": "string",
        "description": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "placeholder": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "角色设定：\n你是一名专业、细致且高效的中文旅游规划助手，具备深厚的旅游地理知识与出行策划经验。\n你能基于用户提供的内容（包括官方资料、游客评论、图片等），快速生成优雅、可靠且可执行的旅行建议或完整行程方案，文本中标题可以以符合的表情符号开头，最终以markdown语法风格输出。\n\n核心要求：\n\n输出语言：\n始终使用自然、优雅、亲切的简体中文。语气温和、有温度但不啰嗦，兼具专业性与实用性。\n\n内容结构：\n\n（1）展示官方信息： \n先展示景点名字以及景点图像\n简明提炼官方资料中的重点，如景区位置、开放时间、特色、门票等。\n\n（2）提取游客评论亮点： 从评论中分析出有价值的出行建议（如最佳游玩时间、拍照点、交通体验、避坑提示等）。\n\n（3）整合生成出行建议或行程方案： 根据官方与游客信息，提供清晰可执行的旅行路线或游玩建议。\n\n（4）展示图片： 若已获取图片链接，请直接以 Markdown 语法原样输出，例如：\n\n![描述](图片URL)\n\n\n信息缺失时：\n若输入内容不足以生成完整方案，应先验证关键词是否正确，并礼貌提醒用户提供更准确信息或补充资料。\n\n风格与语调：\n\n优雅、可靠、逻辑清晰\n\n用词专业但易懂\n\n体现“专业规划师 + 贴心导游”的语气",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "quoteQA",
        "type": "target",
        "label": "apps.templates.userChatInput.Quoted content",
        "description": "apps.templates.userChatInput.Object Array Format",
        "valueType": "datasetQuote",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "target",
        "label": "apps.templates.userChatInput.User question",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "history",
        "label": "apps.templates.userChatInput.New context",
        "description": "apps.templates.userChatInput.Splice this reply into the history",
        "valueType": "chatHistory",
        "type": "source",
        "targets": []
      },
      {
        "key": "answerText",
        "label": "chat.AI response content",
        "description": "apps.templates.userChatInput.will be triggered when the stream has finished replying",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "ow1vab",
    "name": "景点官网查询",
    "avatar": "/imgs/module/http.svg",
    "flowType": "httpRequest",
    "showStatus": true,
    "position": {
      "x": 2523.9705124298603,
      "y": 864.6109734588313
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "system_httpMethod",
        "type": "custom",
        "valueType": "string",
        "label": "",
        "value": "GET",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpReqUrl",
        "type": "hidden",
        "valueType": "string",
        "label": "",
        "description": "core.module.input.description.Http Request Url",
        "placeholder": "https://api.ai.com/getInventory",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "http://www.atopes.xyz:4399/spots/detail-by-keyword",
        "connected": false
      },
      {
        "key": "system_httpHeader",
        "type": "custom",
        "valueType": "any",
        "value": [],
        "label": "",
        "description": "core.module.input.description.Http Request Header",
        "placeholder": "core.module.input.description.Http Request Header",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpParams",
        "type": "hidden",
        "valueType": "any",
        "value": [
          {
            "key": "keyword",
            "value": "{{cityName}}",
            "type": "string"
          }
        ],
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "system_httpJsonBody",
        "type": "hidden",
        "valueType": "any",
        "value": "",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "DYNAMIC_INPUT_KEY",
        "type": "target",
        "valueType": "any",
        "label": "core.module.inputType.dynamicTargetInput",
        "description": "core.module.input.description.dynamic input",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "hideInApp": true,
        "connected": false
      },
      {
        "valueType": "string",
        "label": "cityName",
        "type": "target",
        "required": true,
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "key": "cityName",
        "connected": true
      },
      {
        "key": "system_addInputParam",
        "type": "addInputParam",
        "valueType": "any",
        "label": "",
        "required": false,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "required": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "inputType": "target",
          "valueType": "string",
          "required": true
        },
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": [
          {
            "moduleId": "z7tp6o",
            "key": "switch"
          }
        ]
      },
      {
        "key": "system_addOutputParam",
        "type": "addOutputParam",
        "valueType": "any",
        "label": "",
        "targets": [],
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "defaultEditField": {
          "label": "",
          "key": "",
          "description": "",
          "outputType": "source",
          "valueType": "string"
        }
      },
      {
        "type": "source",
        "valueType": "any",
        "label": "官网信息",
        "description": "",
        "edit": true,
        "editField": {
          "key": true,
          "name": true,
          "description": true,
          "dataType": true
        },
        "targets": [
          {
            "moduleId": "tpnip7",
            "key": "data"
          }
        ],
        "key": "data"
      }
    ]
  },
  {
    "moduleId": "lbigtg",
    "name": "apps.templates.basicDatasetChat.Dataset Search",
    "avatar": "/imgs/module/db.svg",
    "flowType": "datasetSearchNode",
    "showStatus": true,
    "position": {
      "x": 1888.6607377825007,
      "y": 4350.808383029354
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "datasets",
        "type": "selectDataset",
        "label": "apps.templates.basicDatasetChat.Associated dataset",
        "value": [],
        "valueType": "selectDataset",
        "list": [],
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "similarity",
        "type": "hidden",
        "label": "apps.templates.basicDatasetChat.Minimum correlation",
        "value": 0.8,
        "valueType": "number",
        "min": 0,
        "max": 1,
        "step": 0.01,
        "markList": [
          {
            "label": "0",
            "value": 0
          },
          {
            "label": "1",
            "value": 1
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "limit",
        "type": "hidden",
        "label": "apps.templates.basicDatasetChat.Citation limit",
        "description": "apps.templates.basicDatasetChat.Maximum number of Tokens for a single search",
        "value": 1500,
        "valueType": "number",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "searchMode",
        "type": "hidden",
        "label": "core.dataset.search.Mode",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "embedding",
        "connected": false
      },
      {
        "key": "datasetParamsModal",
        "type": "selectDatasetParamsModal",
        "label": "",
        "valueType": "any",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "userChatInput",
        "type": "target",
        "label": "apps.templates.userChatInput.User question",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "isEmpty",
        "label": "common.Search results are empty",
        "type": "source",
        "valueType": "boolean",
        "targets": []
      },
      {
        "key": "unEmpty",
        "label": "common.Search results not empty",
        "type": "source",
        "valueType": "boolean",
        "targets": []
      },
      {
        "key": "quoteQA",
        "label": "apps.templates.userChatInput.Quoted content",
        "description": "apps.templates.basicDatasetChat.Perform additional actions if you want the search result to be null",
        "type": "source",
        "valueType": "datasetQuote",
        "targets": [
          {
            "moduleId": "bwshoh",
            "key": "quoteQA"
          }
        ]
      },
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "bwshoh",
    "name": "知识库处理",
    "avatar": "/imgs/module/ai.svg",
    "flowType": "chatNode",
    "showStatus": true,
    "position": {
      "x": 2539.7397801156762,
      "y": 4342.977193102784
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "model",
        "type": "selectChatModel",
        "label": "apps.templates.userChatInput.dialog model",
        "required": true,
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "temperature",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Temperature",
        "value": 0,
        "valueType": "number",
        "min": 0,
        "max": 10,
        "step": 1,
        "markList": [
          {
            "label": "apps.templates.userChatInput.Strict",
            "value": 0
          },
          {
            "label": "apps.templates.userChatInput.Divergent",
            "value": 10
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "maxToken",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Response limit",
        "value": 0,
        "valueType": "number",
        "min": 100,
        "max": 4000,
        "step": 50,
        "markList": [
          {
            "label": "100",
            "value": 100
          },
          {
            "label": "4000",
            "value": 4000
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "isResponseAnswerText",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Return to AI Content",
        "value": false,
        "valueType": "boolean",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quoteTemplate",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Citation Content Templates",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "quotePrompt",
        "type": "hidden",
        "label": "apps.templates.userChatInput.Quote content prompts",
        "valueType": "string",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "aiSettings",
        "type": "aiSettings",
        "label": "",
        "valueType": "any",
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      },
      {
        "key": "systemPrompt",
        "type": "textarea",
        "label": "apps.templates.userChatInput.System prompt words",
        "max": 300,
        "valueType": "string",
        "description": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "placeholder": "模型固定的引导词，通过调整该内容，可以引导模型聊天方向。该内容会被固定在上下文的开头。可使用变量，例如 {{language}}",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "你是一名专业的旅游路径规划助手。\n\n输入：以英文逗号分隔的两个城市名称，分别表示起点和终点。\n任务：\n1. 优先调用知识库（或内置地理知识）查询两地经纬度。\n2. 如果能获取到完整的两地经纬度信息，则严格输出以下 JSON 结构：\n{\n  \"location\": {\n    \"city1_lat\": <float>,\n    \"city1_lng\": <float>,\n    \"city2_lat\": <float>,\n    \"city2_lng\": <float>\n  }\n}\n3. 如果任意一方查询不到（或信息不完整），则**完全不输出任何内容**，包括文字说明、空 JSON、错误提示、抱歉语，禁止输入“无”等信息\n\n输出要求：\n- 仅输出纯 JSON，无前缀、后缀或解释。\n- 禁止输出任何除 JSON 之外的文本。\n",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "quoteQA",
        "type": "target",
        "label": "apps.templates.userChatInput.Quoted content",
        "description": "apps.templates.userChatInput.Object Array Format",
        "valueType": "datasetQuote",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "userChatInput",
        "type": "target",
        "label": "apps.templates.userChatInput.User question",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      }
    ],
    "outputs": [
      {
        "key": "history",
        "label": "apps.templates.userChatInput.New context",
        "description": "apps.templates.userChatInput.Splice this reply into the history",
        "valueType": "chatHistory",
        "type": "source",
        "targets": []
      },
      {
        "key": "answerText",
        "label": "chat.AI response content",
        "description": "apps.templates.userChatInput.will be triggered when the stream has finished replying",
        "valueType": "string",
        "type": "source",
        "targets": [
          {
            "moduleId": "9pk70k",
            "key": "content"
          }
        ]
      },
      {
        "key": "finish",
        "label": "apps.templates.userChatInput.Running done",
        "description": "apps.templates.userChatInput.Running done trigger",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      }
    ]
  },
  {
    "moduleId": "9pk70k",
    "name": "地理编码格式化",
    "avatar": "/imgs/module/extract.svg",
    "flowType": "contentExtract",
    "showStatus": true,
    "position": {
      "x": 3221.400890468673,
      "y": 4342.857757441569
    },
    "inputs": [
      {
        "key": "switch",
        "type": "target",
        "label": "apps.templates.userChatInput.Trigger",
        "valueType": "any",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "model",
        "type": "selectExtractModel",
        "valueType": "string",
        "label": "core.module.flow.Extraction Model",
        "required": true,
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "value": "ep-20250213141319-tbks4",
        "connected": false
      },
      {
        "key": "description",
        "type": "textarea",
        "valueType": "string",
        "label": "chat.response.module extract description",
        "description": "core.module.flow.Give the AI some corresponding background knowledge or description of the requirements tips",
        "required": true,
        "placeholder": "core.module.flow.You re a lab appointment assistant placeholder",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "value": "从输入的JSON中提取所有目标字段并输入下一流程，中间不做任何处理\n\n",
        "connected": false
      },
      {
        "key": "history",
        "type": "numberInput",
        "label": "apps.templates.userChatInput.Chat history",
        "required": true,
        "min": 0,
        "max": 30,
        "valueType": "chatHistory",
        "value": 0,
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": false
      },
      {
        "key": "content",
        "type": "target",
        "label": "core.module.flow.Text to be extracted",
        "required": true,
        "valueType": "string",
        "showTargetInApp": true,
        "showTargetInPlugin": true,
        "connected": true
      },
      {
        "key": "extractKeys",
        "type": "custom",
        "label": "core.module.flow.Target field",
        "valueType": "any",
        "description": "core.module.flow.Target field description",
        "value": [
          {
            "desc": "地理编码",
            "key": "location",
            "required": true,
            "enum": ""
          }
        ],
        "showTargetInApp": false,
        "showTargetInPlugin": false,
        "connected": false
      }
    ],
    "outputs": [
      {
        "key": "success",
        "label": "core.module.flow.Fields are fully extracted",
        "valueType": "boolean",
        "type": "source",
        "targets": []
      },
      {
        "key": "failed",
        "label": "core.module.flow.Extracted fields are missing",
        "valueType": "boolean",
        "type": "source",
        "targets": [
          {
            "moduleId": "jchve5",
            "key": "switch"
          }
        ]
      },
      {
        "key": "fields",
        "label": "core.module.flow.Complete extraction results",
        "description": "core.module.flow.Complete extraction results description",
        "valueType": "string",
        "type": "source",
        "targets": []
      },
      {
        "key": "location",
        "label": "提取结果-地理编码",
        "description": "无法提取时不会返回",
        "valueType": "string",
        "type": "source",
        "targets": [
          {
            "moduleId": "1rh057",
            "key": "location"
          }
        ]
      }
    ]
  }
]